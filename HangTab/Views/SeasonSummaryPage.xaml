<?xml version="1.0" encoding="utf-8" ?>
<base:ContentPageBase
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:base="clr-namespace:HangTab.Views.Base"
    xmlns:confetti="clr-namespace:HangTab.Views.Controls.ConfettiView"
    xmlns:controls="clr-namespace:HangTab.Views.Controls"
    xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
    xmlns:vm="clr-namespace:HangTab.ViewModels"
    xmlns:vmitems="clr-namespace:HangTab.ViewModels.Items"
    x:Class="HangTab.Views.SeasonSummaryPage"
    x:DataType="vm:SeasonSummaryViewModel">
    
    <Grid
        RowDefinitions="*,Auto,80">
        <confetti:ConfettiView
            ZIndex="2"
            HorizontalOptions="Fill"
            VerticalOptions="Fill"
            InputTransparent="True" />
        
        <CollectionView
            ZIndex="1"
            ItemsSource="{Binding Bowlers}"
            HorizontalOptions="Center"
            VerticalOptions="Center">
            <CollectionView.ItemsLayout>
                <LinearItemsLayout Orientation="Horizontal" />
            </CollectionView.ItemsLayout>
            <CollectionView.ItemTemplate>
                <DataTemplate
                    x:DataType="vmitems:BowlerListItemViewModel">
                    <VerticalStackLayout
                        HorizontalOptions="Center"
                        VerticalOptions="Center">
                        <controls:UserImage
                            ImageUrl="{Binding ImageUrl}"
                            Initials="{Binding Initials}"
                            WidthRequest="80"
                            HeightRequest="80"
                            HorizontalOptions="Center" />

                        <Label
                            Text="{Binding Name}"
                            Style="{StaticResource BowlerName}"
                            HorizontalOptions="Center" />
                        <Label
                            Text="{Binding HangCount, StringFormat='Hangings: {0}'}"
                            Style="{StaticResource Label_Hangings}"
                            HorizontalOptions="Center" />
                    </VerticalStackLayout>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
        
        <VerticalStackLayout
            Grid.Row="1"
            Margin="10,0">
            <Label
                Text="Best Hanging Week"
                Style="{StaticResource Header}" />
            <Border
                Margin="5,8"
                Style="{StaticResource RoundedCornerBorder}">
                            
                <Grid
                    Padding="8"
                    ColumnDefinitions="Auto,Auto,*">
                                
                    <Grid
                        WidthRequest="50"
                        HeightRequest="50">
                        <Image
                            WidthRequest="30"
                            HeightRequest="30"
                            Source="trophy.png">
                        </Image>
                    </Grid>
                                
                    <Label
                        Grid.Column="1"
                        Margin="10,0"
                        FontSize="Large"
                        VerticalOptions="Center"
                        TextColor="{DynamicResource TextPrimaryColor}"
                        Text="{Binding BestHangWeekNumber, Mode=OneWay, StringFormat='Week {0}'}" />
                                
                    <VerticalStackLayout
                        Grid.Column="2"
                        VerticalOptions="Center"
                        Margin="15,0">
                        <Label
                            VerticalOptions="Center"
                            FontSize="Medium"
                            TextColor="{DynamicResource TextPrimaryColor}"
                            Text="{Binding BestHangCount, Mode=OneWay, StringFormat='Hangings: {0}'}" />
                    </VerticalStackLayout>
                                
                </Grid>
                        
            </Border>
            
            <Label
                Text="Worst Hanging Week"
                Style="{StaticResource Header}" />
            <Border
                Margin="5,8"
                Style="{StaticResource RoundedCornerBorder}">
                            
                <Grid
                    Padding="8"
                    ColumnDefinitions="Auto,Auto,*">
                                
                    <Grid
                        WidthRequest="50"
                        HeightRequest="50">
                        <Image
                            WidthRequest="30"
                            HeightRequest="30"
                            Source="dislike_button.png">
                        </Image>
                    </Grid>
                                
                    <Label
                        Grid.Column="1"
                        Margin="10,0"
                        FontSize="Large"
                        VerticalOptions="Center"
                        TextColor="{DynamicResource TextPrimaryColor}"
                        Text="{Binding WorstHangWeekNumber, Mode=OneWay, StringFormat='Week {0}'}" />
                                
                    <VerticalStackLayout
                        Grid.Column="2"
                        VerticalOptions="Center"
                        Margin="15,0">
                        <Label
                            VerticalOptions="Center"
                            FontSize="Medium"
                            TextColor="{DynamicResource TextPrimaryColor}"
                            Text="{Binding WorstHangCount, Mode=OneWay, StringFormat='Hangings: {0}'}" />
                    </VerticalStackLayout>
                                
                </Grid>
                        
            </Border>
            
            <Label
                Text="Best Bus Ride Week"
                Style="{StaticResource Header}" />
            <Border
                Margin="5,8"
                Style="{StaticResource RoundedCornerBorder}">
                            
                <Grid
                    Padding="8"
                    ColumnDefinitions="Auto,Auto,*">
                                
                    <Grid
                        WidthRequest="50"
                        HeightRequest="50">
                        <Image
                            WidthRequest="40"
                            HeightRequest="40"
                            Source="school_bus.png">
                        </Image>
                    </Grid>
                                
                    <Label
                        Grid.Column="1"
                        Margin="10,0"
                        FontSize="Large"
                        VerticalOptions="Center"
                        TextColor="{DynamicResource TextPrimaryColor}"
                        Text="{Binding BestBusRideWeekNumber, Mode=OneWay, StringFormat='Week {0}'}" />
                                
                    <VerticalStackLayout
                        Grid.Column="2"
                        VerticalOptions="Center"
                        Margin="15,0">
                        <Label
                            VerticalOptions="Center"
                            FontSize="Medium"
                            TextColor="{DynamicResource TextPrimaryColor}"
                            Text="{Binding BestBusRideCount, Mode=OneWay, StringFormat='Bus Rides: {0}'}" />
                    </VerticalStackLayout>
                                
                </Grid>
                        
            </Border>
        </VerticalStackLayout>
        
    </Grid>
    
</base:ContentPageBase>